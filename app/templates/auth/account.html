{% extends "base.html" %}

{% block title %}线路室视频站{% endblock %}

{% block css %}
{{ super() }}
<link rel="stylesheet" href={{ url_for("static", filename="css/index.css") }} type="text/css">
{% endblock %}

{% block container %}
<div class="container">
  <div class="left-menu-col noselect">
    <button type="button" class="left-menu-toggle-btn">
      <i class="fa fa-bars" aria-hidden="true"></i>
    </button>
    <div class="left-menu-toggle-wrapper">
      <h1 class="left-menu-head">目录</h1>
      <ul class="left-menu-list">
        <li class="left-menu-item menu-active" data-target-panel="userinfo-panel">个人信息</li>
        <li class="left-menu-item" data-target-panel="security-panel">账号安全</li>
        <a href="/">
          <li class="left-menu-item menu-inactive">回到主页</li>
        </a>
      </ul>
    </div>
  </div>
  <div class="right-content-col">
    <div class="panel-group">
      <div class="content-panel d-block" data-panel-name="userinfo-panel">
        <!-- jQuery loads auth/userinfo.html -->
      </div>
      <div class="content-panel" data-panel-name="security-panel">
        <!-- jQuery loads auth/security.html -->
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block js %}
{{ super() }}
<script src={{ url_for("static", filename="js/index.js") }}></script>
<script>
  jQuery("document").ready(function () {
    jQuery(".content-panel[data-panel-name='userinfo-panel']").load("/userinfo", function (response, status, xhr) {
      if (status == "error") {
        jQuery(this).html('<h1 class="placeholder">内容加载失败</h1>');
      }
    });
    jQuery(".content-panel[data-panel-name='security-panel']").load("/security", function (response, status, xhr) {
      if (status == "error") {
        jQuery(this).html('<h1 class="placeholder">内容加载失败</h1>');
      }
    });
  });
</script>
{% endblock %}